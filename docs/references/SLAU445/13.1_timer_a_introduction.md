# 13.1 Timer_A Introduction

Timer_A is a 16-bit timer/counter with up to seven capture/compare registers. Timer_A can support
multiple captures or compares, PWM outputs, and interval timing. Timer_A also has extensive interrupt
capabilities. Interrupts may be generated from the counter on overflow conditions and from each of
the capture/compare registers.

Timer_A features include:

- Asynchronous 16-bit timer/counter with four operating modes
- Selectable and configurable clock source
- Up to seven configurable capture/compare registers
- Configurable outputs with pulse width modulation (PWM) capability
- Asynchronous input and output latching
- Interrupt vector register for fast decoding of all Timer_A interrupts

Figure 13-1 shows the block diagram of Timer_A.

## Note 1

> [!NOTE] **Use of the word _count_**
> <br>
> _Count_ is used throughout this chapter. It means the counter must be in the process of counting
> for the action to take place. If a particular value is directly written to the counter, an
> associated action does not take place.

## Note 2

> [!NOTE] **Nomenclature**
> <br>
> There may be multiple instantiations of Timer_A on a given device. The prefix TAx is used, where
> x is a greater than equal to zero indicating the Timer_A instantiation. For devices with one
> instantiation, x = 0. The suffix n, where n = 0 to 6, represents the specific capture/compare
> registers associated with the Timer_A instantiation.

<a id="figure-13-1"></a>

```
Timer Block: block
  Outputs:
    Count: 16-bit @bus

  TASSEL: multiplexor
    Width: 2-bit
    Outputs:
      O

  ID: divider
    Width: 2-bit
    Options:
      1: 00
      2: 01
      4: 10
      8: 11
    Inputs:
      CLK: clock
      CLR: 1-bit
    Outputs:
      CLK / ID -> O

  IDEX: divider
    Width: 3-bit
    Options:
      1: 000
      2: 001
      3: 010
      4: 011
      5: 100
      6: 101
      7: 110
      8: 111
    Inputs:
      CLK: clock
      CLR: 1-bit
    Outputs:
      CLK / IDEX -> O

  TAxR: block
    Width: 16-bit
    Inputs:
      CLK: 1-bit @edge
      CLR: 1-bit
      Mode: 2-bit @bi
    Outputs:
      Mode: 2-bit @bi
      RC: 1-bit
      Count: 16-bit @bus

  MC: block
    Width: 2-bit
    Inputs:
      CMP: 1-bit
      Mode: 2-bit @bi
    Outputs:
      Mode: 2-bit @bi



CCR: block
  Inputs:
    n: 3-bit @ max 6
    Count: 16-bit @ bus

  CCIS: multiplexor
    Width: 2-bit
    Outputs:
      O

  SCS: multiplexor
    Width: 1-bit
    Outputs:
      O

  CAP: multiplexor
    Width: 1-bit
    Outputs:
      O

  CM: block
    Width: 2
    Options:
      No capture: 00
      Capture on rising edge: 01
      Capture on falling edge: 10
      Capture on both rising and falling edges: 11
    Inputs:
      CCI: 1-bit
    Outputs:
      O: 1-bit

  Logic: block
    Inputs:
      CCI: 1-bit
    Outputs:
      O: 1-bit

  TAxCCRn: block
    Inputs:
      Sync: 1-bit @rising
      Count: 16-bit @bus
    Outputs:
      O: 16-bit @bus

  Comparatorn:
    Inputs:
      CCRCount: 16-bit
      Count: 16-bit
    Outputs:
      Equ: 1-bit

  Sync: block
    Inputs:
      CLK: 1-bit @edge
      CCI: 1-bit
    Outputs:
      O: 1-bit        

  CCILatch: block
    Inputs:
      A: 1-bit
      EN: 1-bit
    Outputs:
      Y: 1-bit

  OutputUnit4: block
    Width: 3
    Inputs:
      Equ6: 1-bit
      Out6: 1-bit
      Equ0: 1-bit
      Mode: 3-bit
    Outputs:
      O: 1-bit

  Nor1: NOR
    Inputs:
      A: 1-bit
      B: 1-bit
      C: 1-bit
    Outputs:
      O: 1-bit

  And1: AND
    Inputs:
      A: 1-bit
      B: 1-bit
    Outputs:
      O: 1-bit

  Nand1: NAND
    Inputs:
      A: 1-bit
      B: 1-bit
    Outputs:
      O: 1-bit

  Or1: OR
    Inputs:
      A: 1-bit
      B: 1-bit
    Outputs:
      O: 1-bit

  DataLatch: RS FlipFlop
    Inputs:
      DATA: 1-bit
      RESET: 1-bit
      SET: 1-bit
      CLK: 1-bit @edge
    Outputs:
      Q: 1-bit



CCRn[0..6]: CCR @CCRn[].n = index

# Connection Groups - Logically Organized

# Clock Distribution
Connections:
  ClockPath:
    TAxCLK -> TASSEL.00
    ACLK -> TASSEL.01
    SMCLK -> TASSEL.10
    INCLK -> TASSEL.11
    TASSEL.O -> ID.CLK
    ID.O -> IDEX.CLK
    IDEX.O ->| Timer Clock
    IDEX.O ->| TAxR.CLK

# Timer Core
Connections:
  TimerCore:
    TACLR ->| ID.CLR
    TACLR ->| IDEX.CLR
    TACLR ->| TAxR.CLR
    TAxR.RC -> TAxCTL.TAIFG @set
    TAxR.Mode <-> MC.Mode
    EQU0 -> MC.CMP
    Count -> TAxR.Count @ bus

# CCR Input Selection
Connections:
  CCRInputs:
    CCInA -> CCIS.00
    CCInB -> CCIS.01
    GND -> CCIS.10
    VCC -> CCIS.11
    CCIS.O ->| CCI
    CCIS.O ->| CM.CCI
    CCIS.O ->| CCILatch.A

# Capture Logic
Connections:
  CaptureControl:
    CM.O ->| Logic.CCI
    CM.O ->| Sync.CCI
    CM.O ->| SCS.0
    Timer Clock ->| Sync.CLK
    Sync.O -> SCS.1
    Logic.O -> COV
    SCS.O ->| CAP.1
    SCS.O ->| TAxCCRn.Sync @rising

# Compare Logic
Connections:
  CompareControl:
    Count ->| TAxCCRn.Count @bus
    TAxCCRn.O -> Comparatorn.CCRCount @bus
    Count ->| Comparatorn.Count @bus
    Comparatorn.Equ ->| CAP.0
    Comparatorn.Equ ->| CCILatch.EN
    Comparatorn.Equ ->| OutputUnit4.Equ6
    CAP.O -> TAxCCRn.CCIFG @set
    CCILatch.Y -> SCCI

# Output Generation
Connections:
  OutputControl:
    OUTMOD ->| OutputUnit4.Mode
    OUTMOD[0] ->| Nor1.A
    OUTMOD[1] ->| Nor1.B
    OUTMOD[2] ->| Nor1.C
    Nor1.O ->| Nand1.A
    Nor1.O ->| And1.B
    OUT ->| And1.A
    OUT ->| Nand1.B
    Nand1.O -> Or1.A
    And1.O -> DataLatch.SET
    Or1.O -> DataLatch.RESET
    POR -> Or1.B
    OutputUnit4.O -> DataLatch.DATA
    DataLatch.Q ->| OUT6
    DataLatch.Q ->| OutputUnit4.Out6
    Timer Clock ->| DataLatch.CLK
    EQU0 ->| OutputUnit4.Equ0

# Global Connections
Connections:
  Global:
    Timer Block.Count -> CCRn[].Count @ bus
```

**Figure 13-1. Timer_A Block Diagram**
