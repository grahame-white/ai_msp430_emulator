# 1.10 JTAG Mailbox (JMB) System

The SYS module provides the capability to exchange user data through the regular JTAG or SBW test/debug interface. The
idea behind the JMB is to have a direct interface to the CPU during debugging, programming, and test that is identical
for all MSP430 devices of this family and uses only a few or no user application resources. The JTAG interface was
chosen because it is available on all MSP430 devices and is a dedicated resource for debugging, programming, and test.

Applications of the JMB are:

- Providing entry password for device lock or unlock protection
- Run-time data exchange (RTDX)

## 1.10.1 JMB Configuration

The JMB supports two transfer modes, 16 bit and 32 bit. Set `JMBMODE` to enable 32-bit transfer mode. Clear `JMBMODE`
to enable 16-bit transfer mode.

## 1.10.2 `SYSJMBO0` and `SYSJMBO1` Outgoing Mailbox

Two 16-bit registers are available for outgoing messages to the JTAG/SBW port. `SYSJMBO0` is only used when using
16-bit transfer mode (`JMBMODE` = 0). `SYSJMBO1` is used in addition to `SYSJMBO0` when using 32-bit transfer mode
(`JMBMODE` = 1). When the application wishes to send a message to the JTAG port, it writes data to `SYSJMBO0` for
16-bit mode, or `JBOUT0` and `JBOUT1` for 32-bit mode.

`JMBOUT0FG` and `JMBOUT1FG` are read only flags that indicate the status of `SYSJMBO0` and `SYSJMBO1`, respectively.
When `JMBOUT0FG` is set, `SYSJMBO0` has been read by the JTAG port and is ready to receive new data. When `JMBOUT0FG`
is reset, the `SYSJMBO0` is not ready to receive new data. `JMBOUT1FG` behaves similarly.

## 1.10.3 `SYSJMBI0` and `SYSJMBI1` Incoming Mailbox

Two 16-bit registers are available for incoming messages from the JTAG port. Only `SYSJMBI0` is used in 16-bit
transfer mode (`JMBMODE` = 0). `SYSJMBI1` is used in addition to `SYSJMBI0` in 32-bit transfer mode (`JMBMODE` = 1). To
send a message to the application, the JTAG port writes data to `SYSJMBI0` (for 16 bit mode) or to `SYSJMBI0` and
`SYSJMBI1` (for 32-bit mode).

`JMBIN0FG` and `JMBIN1FG` are flags that indicate the status of `SYSJMBI0` and `SYSJMBI1`, respectively. When
`JMBIN0FG` = 1, `SYSJMBI0` has data that is available for reading. When `JMBIN0FG` = 0, no new data is available in
`SYSJMBI0`. `JMBIN1FG` behaves similarly.

To configure `JMBIN0FG` and `JMBIN1FG` to clear automatically, set `JMBCLR0OFF` = 0 and `JMBCLR1OFF` = 0, respectively.
Otherwise, these flags must be cleared by software.

## 1.10.4 JMB NMI Usage

To avoid unnecessary polling, the JMB handshake mechanism can be configured to use interrupts. In 16 bit mode,
`JMBOUTIFG` is set when `SYSJMBO0` has been read by the JTAG port and is ready to receive data. In 32-bit mode,
`JMBOUTIFG` is set when both `SYSJMBO0` and `SYSJMBO1` have been read by the JTAG port and are ready to receive data.
If `JMBOUTIE` is set, these events cause a system NMI. In 16-bit mode, `JMBOUTIFG` is cleared automatically when data
is written to `SYSJMBO0`. In 32-bit mode, `JMBOUTIFG` is cleared automatically when data is written to both `SYSJMBO0`
and `SYSJMBO1`. In addition, the `JMBOUTIFG` can be cleared when reading `SYSSNIV`. Clearing `JMBOUTIE` disables the
NMI interrupt.

In 16-bit mode, `JMBINIFG` is set when `SYSJMBI0` is available for reading. In 32-bit mode, `JMBINIFG` is set when both
`SYSJMBI0` and `SYSJMBI1` are available for reading. If `JMBOUTIE` is set, these events cause a system NMI. In
16-bit mode, `JMBINIFG` is cleared automatically when `SYSJMBI0` is read. In 32 bit mode, `JMBINIFG` Is cleared
automatically when both `SYSJMBI0` and `SYSJMBI1` are read. In addition, the `JMBINIFG` can be cleared when reading
`SYSSNIV`. Clearing `JMBINIE` disables the NMI interrupt.
