#!/usr/bin/env bash
# script/cibuild
# CI-specific build and test script

set -e

cd "$(dirname "$0")/.."

echo "==> Running MSP430 Emulator CI build..."

# Bootstrap dependencies
echo "==> Bootstrapping dependencies..."
./script/bootstrap

# Check code formatting
echo "==> Checking code formatting..."
./script/lint

# Build the project
echo "==> Building project..."
./script/build

# Run all tests
echo "==> Running tests..."
./script/test

echo "==> CI build completed successfully!"