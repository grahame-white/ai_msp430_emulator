#!/usr/bin/env bash
# scripts/setup
# Set up the project for development

set -e

cd "$(dirname "$0")/.."

echo "==> Setting up MSP430 Emulator development environment..."

# Check if .NET 8.0 is installed
if ! command -v dotnet &> /dev/null; then
    echo "Error: .NET SDK is not installed. Please install .NET 8.0 SDK."
    exit 1
fi

# Check .NET version
DOTNET_VERSION=$(dotnet --version)
echo "==> Found .NET version: $DOTNET_VERSION"

# Restore dependencies
echo "==> Restoring NuGet packages..."
dotnet restore

# Build the solution
echo "==> Building solution..."
dotnet build --configuration Debug

echo "==> Setup completed successfully!"
echo "==> You can now run 'scripts/build' to build the project"
echo "==> You can now run 'scripts/test' to run tests"